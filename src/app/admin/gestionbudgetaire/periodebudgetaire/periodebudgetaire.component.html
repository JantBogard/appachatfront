<div class="card">
  <div class="card-body">
    <div class="row">
      <div class="col-10">
        <h4 class="card-title">P√©riode budgetaire</h4>
      </div>
      <div class="col-2">
        <button class="btn btn-gradient-primary btn-icon-text" (click)="openModal(addPeriodeBudgetaire)">Ajouter <i class="mdi mdi-plus btn-icon-append"></i></button>
      </div>
    </div>
    <table class="table table-hover">
      <thead>
      <tr>
        <th>Date</th>
        <th>Ann√©e Budgetaire</th>
        <th>statut</th>
        <th>montant</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <ng-container *ngIf="periodeBudgetaireService.periodeBudgetaires.length != 0; else emptyTable">
        <tr *ngFor="let periodeBudgetaire of periodeBudgetaireService.periodeBudgetaires">
          <td>{{ periodeBudgetaire.date }}</td>
          <td>{{ periodeBudgetaire.anneeBugetaire }}</td>
          <td>{{ periodeBudgetaire.statut }}</td>
          <td>{{ periodeBudgetaire.montant }}</td>
          <td>
            <button class="btn btn-inverse-warning btn-icon" (click)="openModal(editPeriodeBudgetaire, periodeBudgetaire)"> <i class="mdi mdi-pencil"></i></button>
            <button class="btn btn-inverse-danger btn-icon" (click)="openModal(deletePeriodeBudgetaire, periodeBudgetaire)"><i class="mdi mdi-delete-forever"></i></button>
          </td>
        </tr>
      </ng-container>
      </tbody>
    </table>
  </div>
</div>

<ng-template #emptyTable>
  <tr>
    <td class="text-center" colspan="5">Aucune p√©riode Budgetaire enregistrer üò•!</td>
  </tr>
</ng-template>

<ng-template #addPeriodeBudgetaire>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Ajouter une p√©riode Budgetaire</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form class="forms-sample" [formGroup]="formAddPeriodeBudgetaire" (ngSubmit)="onAddPeriodeBudgetaire()">
      <div class="form-group">
        <label for="exampleInputUsername1">Date</label>
        <input formControlName="Date" type="date" class="form-control" value="{{ date | date:'yyyy-MM-dd' }}" id="exampleInputUsername1" placeholder="Date">
      </div>
      <div class="form-group">
        <label for="exampleInputEmail1">Ann√©e Budgetaire</label>
        <input formControlName="anneeBugetaire" type="text" class="form-control" id="exampleInputEmail1" placeholder="Ann√©e Budgetaire">
      </div>
      <div class="form-group">
        <label for="exampleSelectGender">Statut</label>
        <select formControlName="statut" class="form-control" id="exampleSelectGender">
          <option></option>
          <option value="NON VALIDE">NON VALIDE</option>
          <option value="VALIDE">VALIDE</option>
          <option value="CLOS">CLOS</option>
        </select>
      </div>
      <div class="form-group">
        <label for="exampleInputEmail1">Montant</label>
        <input formControlName="montant" type="text" class="form-control" id="exampleInputEmail1" placeholder="Montant">
      </div>
      <button type="submit" class="btn btn-gradient-primary me-2">
        Enregistrer
        <span *ngIf="isLoading" class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
      </button>
      <button type="reset" (click)="modalRef?.hide()" class="btn btn-light">Annuler</button>
    </form>
  </div>
</ng-template>

<ng-template #editPeriodeBudgetaire>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Modifier une P√©riode Budgetaire</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="forms-sample">
      <div class="form-group">
        <label >Date</label>
        <input [(ngModel)]="periodeBudgetaire.date" type="date" class="form-control"  placeholder="Date">
      </div>
      <div class="form-group">
        <label>Ann√©e Budgetaire</label>
        <input [(ngModel)]="periodeBudgetaire.anneeBugetaire" type="text" class="form-control"  placeholder="Ann√©e Budgetaire">
      </div>
      <div class="form-group">
        <label>Statut</label>
        <select [(ngModel)]="periodeBudgetaire.statut" class="form-control">
          <option></option>
          <option value="NON VALIDE">NON VALIDE</option>
          <option value="VALIDE">VALIDE</option>
          <option value="CLOS">CLOS</option>
        </select>
      </div>
      <div class="form-group">
        <label>Montant</label>
        <input [(ngModel)]="periodeBudgetaire.montant" type="text" class="form-control" placeholder="Montant">
      </div>
      <button (click)="onUpdatePeriodeBudgetaire()" class="btn btn-gradient-primary me-2">
        Enregistrer
        <span *ngIf="isLoading" class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
      </button>
      <button type="reset" (click)="modalRef?.hide()" class="btn btn-light">Annuler</button>
    </div>
  </div>
</ng-template>
<ng-template #deletePeriodeBudgetaire><p>Comming soon ...</p></ng-template>


